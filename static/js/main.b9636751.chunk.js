(this["webpackJsonpfirefighting-planner"]=this["webpackJsonpfirefighting-planner"]||[]).push([[0],{102:function(e){e.exports=JSON.parse('{"a":"firefighting-planner","b":"0.1.0"}')},219:function(e,a,t){e.exports=t(317)},224:function(e,a,t){},317:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(16),o=t.n(l),i=t(393),c=t(376),s=(t(224),t(199)),u=Object(s.a)({palette:{primary:{main:"#ef6c00"},secondary:{main:"#0d47a1"}}}),p=t(87),m=t(74),d=t(363),g=t(159),f=t(144),b=t(99),h=t(189),E=t(191),v=t.n(E),y=t(21),w=t(185),O=t.n(w),j=function(e){return function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object.keys(e),r={},l=0;l<n.length;l++){var o=e[n[l]](a[n[l]],t);r[n[l]]=o}return r}},C=t(102),P=t(10);function L(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function R(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?L(t,!0).forEach((function(a){Object(P.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var N={dateTime:"2018-08-01T10:10",searchWord:"",drawerOpen:!1};function S(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function k(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?S(t,!0).forEach((function(a){Object(P.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var T={compass:!1,cordinates:!1,viewControls:!1,threeD:!1,BMNG:!0,BMNGLandsat:!1,BingAerial:!1,BingAerialWithLabels:!0,BingRoads:!1,OpenStreetMapImage:!1,Atmosphere:!0,layer:{label:"Select leyer",tag:"_"}};function D(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function A(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?D(t,!0).forEach((function(a){Object(P.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var _={range:6e5,lat:36.256535392993314,lon:-119.2002385680952,plans:[],dialogOpen:!1,plan:{}};function x(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function I(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?x(t,!0).forEach((function(a){Object(P.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var W={range:6e5,lat:36.256535392993314,lon:-119.2002385680952,reports:[],dialogOpen:!1,report:{}},F=j({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"@app/setDateTime":return R({},e,{dateTime:a.dateTime});case"@app/setSearchWord":return R({},e,{searchWord:a.searchWord});case"@app/toggleDrawer":return R({},e,{drawerOpen:!e.drawerOpen});default:return e}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"@map/setLayer":return k({},e,{layer:a.layer});case"@map/toggleThreeD":return k({},e,{threeD:!e.threeD});case"@map/toggleCompass":return k({},e,{compass:!e.compass});case"@map/toggleCordinates":return k({},e,{cordinates:!e.cordinates});case"@map/toggleViewControls":return k({},e,{viewControls:!e.viewControls});case"@map/toggleBMNG":return k({},e,{BMNG:!e.BMNG});case"@map/toggleBMNGLandsat":return k({},e,{BMNGLandsat:!e.BMNGLandsat});case"@map/toggleBingAerial":return k({},e,{BingAerial:!e.BingAerial});case"@map/toggleBingAerialWithLabels":return k({},e,{BingAerialWithLabels:!e.BingAerialWithLabels});case"@map/toggleBingRoads":return k({},e,{BingRoads:!e.BingRoads});case"@map/toggleOpenStreetMapImage":return k({},e,{OpenStreetMapImage:!e.OpenStreetMapImage});case"@map/toggleAtmosphere":return k({},e,{Atmosphere:!e.Atmosphere});default:return e}},planner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"@planner/setPlan":return A({},e,{plan:a.plan});case"@planner/setDialogOpen":return A({},e,{dialogOpen:a.dialogOpen});case"@planner/setRange":return A({},e,{range:a.range});case"@planner/setLat":return A({},e,{lat:a.lat});case"@planner/setLon":return A({},e,{lon:a.lon});case"@planner/setPlans":return A({},e,{plans:a.plans});default:return e}},reporter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"@reporter/setReport":return I({},e,{report:a.report});case"@reporter/setDialogOpen":return I({},e,{dialogOpen:a.dialogOpen});case"@reporter/setRange":return I({},e,{range:a.range});case"@reporter/setLat":return I({},e,{lat:a.lat});case"@reporter/setLon":return I({},e,{lon:a.lon});case"@reporter/setReports":return I({},e,{reports:a.reports});default:return e}}}),M={app:N,map:T,planner:_,reporter:W},B=JSON.parse(localStorage.getItem("".concat(C.a,"@").concat(C.b))),G=Object(n.createContext)(O()(M,B)),U=function(e){var a=Object(n.useContext)(G);return{state:a.state,dispatch:a.dispatch}},V=t(117),H=t(158),z=t(188),J=t.n(z);var K=function(){var e=Object(n.useState)(null),a=Object(y.a)(e,2),t=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(y.a)(o,2),c=i[0],s=i[1],u=Object(n.useState)(!1),p=Object(y.a)(u,2),d=p[0],g=p[1];return d?r.a.createElement(m.a,{push:!0,to:"/"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{edge:"end",onClick:function(e){l(e.currentTarget),s(!0)},color:"inherit"},r.a.createElement(J.a,null)),r.a.createElement(V.a,{open:c,onClose:function(){l(null),s(!1)},anchorEl:t},r.a.createElement(H.a,{component:"a",href:"https://2019.spaceappschallenge.org/challenges/living-our-world/spot-fire-v20/teams/firefighting-planner/project",target:"_blank"},"Project detail"),r.a.createElement(H.a,{component:"a",href:"https://opennex.org/project/projectDetail/275",target:"_blank"},"OpenNEX"),r.a.createElement(H.a,{component:"a",href:"https://github.com/watilde/firefighting-planner",target:"_blank"},"GitHub"),r.a.createElement(H.a,{onClick:function(){localStorage.clear()}},"Clear cache"),r.a.createElement(H.a,{onClick:function(){g(!0)}},"Logout")))},Y=t(203),Q=t(11),X=t(190),q=t.n(X),$=Object(h.a)((function(e){return{search:Object(P.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Q.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Q.c)(e.palette.common.white,.25)},marginLeft:0,marginRight:"5px",width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(P.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));var Z=function(){var e=U(),a=e.dispatch,t=e.state.app.searchWord,n=$();return r.a.createElement("div",{className:n.search},r.a.createElement("div",{className:n.searchIcon},r.a.createElement(q.a,null)),r.a.createElement(Y.a,{placeholder:"Search\u2026",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"},onKeyPress:function(e){"Enter"===e.key&&a({type:"@app/setSearchWord",searchWord:e.target.value})},defaultValue:t}))},ee=Object(h.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1},menuButton:{marginRight:e.spacing(2)}}}));var ae=function(){var e=U().dispatch,a=ee();return r.a.createElement("div",{className:a.root},r.a.createElement(d.a,{position:"static"},r.a.createElement(g.a,null,r.a.createElement(f.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"menu",onClick:function(a){e({type:"@app/toggleDrawer"})}},r.a.createElement(v.a,null)),r.a.createElement(b.a,{variant:"h6",className:a.title,noWrap:!0},"Firefighting planner"),r.a.createElement(Z,null),r.a.createElement(K,null))))},te=t(397),ne=t(366),re=t(192),le=t.n(re),oe=t(362),ie=t(333),ce=[{label:"Reporter",pathname:"/report"},{label:"Planner",pathname:"/plan"},{label:"Dashboard",pathname:"/dashboard"}],se=Object(h.a)((function(e){return{list:{padding:0},listHeader:{fontWeight:"bold"},listLink:{textDecoration:"none",color:"#000"},listItem:{cursor:"pointer","&:hover":{backgroundColor:"#eee"},"&.active":{backgroundColor:"#ddd"}}}}));var ue=function(){var e=Object(m.g)(),a=se();return r.a.createElement(oe.a,{className:a.list},r.a.createElement(ie.a,{className:a.listHeader},"Menu"),ce.map((function(t){var n=e.pathname===t.pathname?"".concat(a.listItem," active"):a.listItem;return r.a.createElement(p.b,{key:t.label,to:t.pathname,className:a.listLink},r.a.createElement(ie.a,{className:n},t.label))})))},pe=t(181),me=Object(h.a)((function(e){return{list:{padding:0},listHeader:{fontWeight:"bold"},textField:{minWidth:"200px"}}}));var de=function(){var e=me(),a=U(),t=a.state,n=a.dispatch,l=t.app.dateTime;return r.a.createElement(oe.a,{className:e.list},r.a.createElement(ie.a,{className:e.listHeader},"Target Date"),r.a.createElement(ie.a,null,r.a.createElement(pe.a,{type:"datetime-local",defaultValue:l,className:e.textField,variant:"outlined",InputLabelProps:{shrink:!0},onChange:function(e){n({type:"@app/setDateTime",dateTime:e.target.value})}})))},ge=t(365),fe=Object(h.a)((function(e){return{list:{padding:0},listHeader:{fontWeight:"bold"},listText:{fontSize:"14px"},listItem:{display:"flex",justifyContent:"space-between",paddingTop:0,paddingBottom:0}}}));var be=function(){var e=fe(),a=U(),t=a.state,n=a.dispatch,l=t.map,o=l.threeD,i=l.compass,c=l.cordinates,s=l.viewControls,u=function(e){n({type:"@map/toggle".concat(e)})};return r.a.createElement(oe.a,{className:e.list},r.a.createElement(ie.a,{className:e.listHeader},"Map options"),r.a.createElement(ie.a,{className:e.listItem},r.a.createElement(b.a,{className:e.listText},"3D"),r.a.createElement(ge.a,{checked:o,onChange:function(){u("ThreeD")}})),r.a.createElement(ie.a,{className:e.listItem},r.a.createElement(b.a,{className:e.listText},"Compass"),r.a.createElement(ge.a,{checked:i,onChange:function(){u("Compass")}})),r.a.createElement(ie.a,{className:e.listItem},r.a.createElement(b.a,{className:e.listText},"Cordinates"),r.a.createElement(ge.a,{checked:c,onChange:function(){u("Cordinates")}})),r.a.createElement(ie.a,{className:e.listItem},r.a.createElement(b.a,{className:e.listText},"View Controls"),r.a.createElement(ge.a,{checked:s,onChange:function(){u("ViewControls")}})))},he=t(395),Ee=[{label:"No layer",tag:"_"},{label:"Land Surface Temperature [Day]",tag:"MOD_LSTD_D"},{label:"Land Surface Temperature [Night]",tag:"MOD_LSTN_D"},{label:"Cloud Water Content",tag:"MYDAL2_D_CLD_WP"},{label:"Leaf Area Index",tag:"MOD15A2_E_LAI"},{label:"Nitrogen Dioxide",tag:"AURA_NO2_D"},{label:"Population",tag:"SEDAC_POP"},{label:"Rainfall",tag:"TRMM_3B43D"},{label:"Snow Cover",tag:"MOD10C1_D_SNOW"},{label:"Snow Water Equivalent",tag:"SWE_M"},{label:"Solar Insolation",tag:"CERES_INSOL_D"},{label:"Topography",tag:"SRTM_RAMP2_TOPO"},{label:"UV Index",tag:"AURA_UVI_CLIM_M"},{label:"Vegetation Index (NDVI)",tag:"MOD_NDVI_16"},{label:"Water Vapor",tag:"MYDAL2_D_SKY_WV"}],ve=Object(h.a)((function(e){return{list:{padding:0},listHeader:{fontWeight:"bold"},listText:{fontSize:"14px"},listItem:{display:"flex",justifyContent:"space-between",paddingTop:0,paddingBottom:0}}}));var ye=function(){var e=ve(),a=U(),t=a.state,n=a.dispatch,l=t.map.layer;return r.a.createElement(oe.a,{className:e.list},r.a.createElement(ie.a,{className:e.listHeader},"Layer options for Planner"),Ee.map((function(a){return r.a.createElement(ie.a,{key:a.tag,className:e.listItem},r.a.createElement(b.a,{className:e.listText},a.label),r.a.createElement(he.a,{checked:l.tag===a.tag,onChange:function(){!function(e){var a=Ee.filter((function(a){return a.tag===e})).pop();n({type:"@map/setLayer",layer:a})}(a.tag)}}))})))},we=Object(h.a)((function(e){return{drawerHeader:{display:"flex",alignItems:"center",justifyContent:"flex-start"},drawerPaper:{width:300}}}));var Oe=function(){var e=U(),a=e.dispatch,t=e.state.app.drawerOpen,n=we();return r.a.createElement(te.a,{className:n.drawer,variant:"persistent",anchor:"left",open:t,classes:{paper:n.drawerPaper}},r.a.createElement("div",{className:n.drawerHeader},r.a.createElement(f.a,{onClick:function(e){a({type:"@app/toggleDrawer"})}},r.a.createElement(le.a,null))),r.a.createElement(ne.a,null),r.a.createElement(de,null),r.a.createElement(ne.a,null),r.a.createElement(ue,null),r.a.createElement(ne.a,null),r.a.createElement(be,null),r.a.createElement(ne.a,null),r.a.createElement(ye,null))},je=t(367),Ce=t(123),Pe=t.n(Ce),Le=t(89),Re=t.n(Le),Ne=Object(h.a)((function(e){return{fab:{position:"fixed",margin:e.spacing(1),bottom:0,right:0}}}));var Se=function(){var e=U(),a=e.state,t=e.dispatch,n=a.reporter,l=n.lat,o=n.lon,i=a.app.dateTime,c=Ne();return r.a.createElement(je.a,{color:"secondary","aria-label":"add",className:c.fab,onClick:function(e){t({type:"@reporter/setDialogOpen",dialogOpen:!0}),t({type:"@reporter/setReport",report:{category:"Report",uuid:Re()(),type:"",description:"",dateTime:i,lat:l,lon:o}})}},r.a.createElement(Pe.a,null))},ke=t(368),Te=t(369),De=t(370),Ae=t(371),_e=t(161),xe=t(182),Ie=t(180),We=t(372),Fe=t(162),Me=Object(h.a)((function(e){return{formControl:{minWidth:120}}}));var Be=function(){var e=U(),a=e.dispatch,t=e.state.reporter,n=t.report,l=t.reports,o=t.dialogOpen,i=Me(),c=function(){a({type:"@reporter/setDialogOpen",dialogOpen:!1})},s=function(e){var t=Object.assign({},n);t[e.target.name]=e.target.value,a({type:"@reporter/setReport",report:t})};return r.a.createElement(ke.a,{open:o,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement(Te.a,{id:"form-dialog-title"},"New report"),r.a.createElement(De.a,null,r.a.createElement(Ae.a,null,"Your report will be immediately shared with the firefighters."),r.a.createElement(_e.a,{className:i.formControl},r.a.createElement(xe.a,{htmlFor:"type"},"Report type"),r.a.createElement(Ie.a,{inputProps:{name:"type"},value:n.type,onChange:s},r.a.createElement(H.a,{value:"Evacuation help"},"Evacuation help"),r.a.createElement(H.a,{value:"Wildfire report"},"Wildfire report"),r.a.createElement(H.a,{value:"Others"},"Others"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(pe.a,{label:"Description",name:"description",value:n.description,fullWidth:!0,onChange:s}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(pe.a,{name:"dateTime",label:"When",type:"datetime-local",value:n.dateTime,InputLabelProps:{shrink:!0},onChange:s})),r.a.createElement(We.a,null,r.a.createElement(Fe.a,{onClick:c,color:"primary"},"Cancel"),r.a.createElement(Fe.a,{onClick:function(e){var t=[].concat(l,n);a({type:"@reporter/setReports",reports:t}),a({type:"@reporter/setDialogOpen",dialogOpen:!1})},color:"primary"},"Save")))},Ge=t(7),Ue=t.n(Ge),Ve=function(e,a){var t=new Ue.a.PlacemarkAttributes(null);t.imageScale=.05,t.imageColor=Ue.a.Color.RED,t.labelAttributes.offset=new Ue.a.Offset(Ue.a.OFFSET_FRACTION,.5,Ue.a.OFFSET_FRACTION,1),t.imageSource="".concat(Ue.a.configuration.baseUrl,"images/white-dot.png");var n={};return n.name=e.recordNumber,n.attributes=new Ue.a.PlacemarkAttributes(t),n.attributes.imageScale=.04+.001*e.values.FRP,n};var He=function(){var e=U(),a=e.dispatch,t=e.state,l=t.reporter,o=l.lat,i=l.lon,c=l.range,s=l.reports,u=t.map,p=u.compass,m=u.cordinates,d=u.viewControls,g=u.threeD,f=t.app.searchWord,b=function(e){a({type:"@planner/setLat",lat:e})},h=function(e){a({type:"@planner/setLon",lon:e})};Ue.a.configuration.baseUrl="".concat(""),Ue.a.BingMapsKey="Arpxb2gWJKw1Q7P7mt4_d1Lhg_sRPDCiH25jPkNGUanfiHyEi1Ijlk-4UVgkyu65";var E=new Ue.a.Globe(new Ue.a.EarthElevationModel),v=new Ue.a.Globe2D;return v.projection=new Ue.a.ProjectionMercator,Object(n.useEffect)((function(){var e=document.getElementById("canvas");e.width=window.innerWidth,e.height=window.innerHeight-64;var t=new Ue.a.WorldWindow("canvas");t.globe=g?E:v,t.navigator.lookAtLocation.latitude=o,t.navigator.lookAtLocation.longitude=i,t.navigator.range=c;for(var n=[{layer:new Ue.a.BMNGLayer,enabled:!0},{layer:new Ue.a.BMNGLandsatLayer,enabled:!1},{layer:new Ue.a.BingAerialLayer(null),enabled:!1},{layer:new Ue.a.BingAerialWithLabelsLayer(null),enabled:!0},{layer:new Ue.a.BingRoadsLayer(null),enabled:!1},{layer:new Ue.a.OpenStreetMapImageLayer(null),enabled:!1},{layer:new Ue.a.AtmosphereLayer,enabled:!0},{layer:new Ue.a.CompassLayer,enabled:p},{layer:new Ue.a.CoordinatesDisplayLayer(t),enabled:m},{layer:new Ue.a.ViewControlsLayer(t),enabled:d}],r=0;r<n.length;r++)n[r].layer.enabled=n[r].enabled,t.addLayer(n[r].layer);var l=new Ue.a.RenderableLayer("Fires");new Ue.a.Shapefile("".concat(Ue.a.configuration.baseUrl,"firms/VNP14IMGTDL_NRT_USA_contiguous_and_Hawaii_24h/VNP14IMGTDL_NRT_USA_contiguous_and_Hawaii_24h.shp")).load(null,Ve,l),t.addLayer(l);var u=new Ue.a.RenderableLayer("Reports"),y=new Ue.a.PlacemarkAttributes(null);y.imageScale=.5,y.imageColor=Ue.a.Color.GREEN,y.labelAttributes.offset=new Ue.a.Offset(Ue.a.OFFSET_FRACTION,.5,Ue.a.OFFSET_FRACTION,1),s.forEach((function(e){var a=new Ue.a.Placemark(new Ue.a.Position(e.lat,e.lon,100),!0,null);a.label="".concat(e.type,"\n").concat(e.dateTime),a.altitudeMode=Ue.a.RELATIVE_TO_GROUND;var t=new Ue.a.PlacemarkAttributes(y);t.imageSource="".concat(Ue.a.configuration.baseUrl,"images/white-dot.png"),a.attributes=t;var n=new Ue.a.PlacemarkAttributes(t);n.imageScale=1.2,a.highlightAttributes=n,u.addRenderable(a)})),t.addLayer(u);var w=new Ue.a.NominatimGeocoder,O=new Ue.a.GoToAnimator(t);if(f)if(f.match(Ue.a.WWUtil.latLonRegex)){var j=f.split(","),C=parseFloat(j[0]),P=parseFloat(j[1]);O.goTo(new Ue.a.Location(C,P),(function(){b(C),h(P)}))}else w.lookup(f,(function(e,a){if(0!==a.length){var t=parseFloat(a[0].lat),n=parseFloat(a[0].lon);O.goTo(new Ue.a.Location(t,n),(function(){b(t),h(n)}))}}));var L=function(e){var a=e.clientX,n=e.clientY,r=t.pick(t.canvasCoordinates(a,n));if(1===r.objects.length&&r.objects[0].isTerrain){var l=r.objects[0].position;O.goTo(new Ue.a.Location(l.latitude,l.longitude),(function(){b(l.latitude),h(l.longitude)}))}};t.addEventListener("wheel",(function(e){var n;n=t.navigator.range,a({type:"@planner/setRange",range:n})})),new Ue.a.ClickRecognizer(t,L),new Ue.a.TapRecognizer(t,L)}),[f,g,s,p,m,d]),r.a.createElement("canvas",{id:"canvas"})};var ze=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,null),r.a.createElement(Oe,null),r.a.createElement(He,null),r.a.createElement(Be,null),r.a.createElement(Se,null))},Je=Object(h.a)((function(e){return{fab:{position:"fixed",margin:e.spacing(1),bottom:0,right:0}}}));var Ke=function(){var e=U(),a=e.state,t=e.dispatch,n=a.planner,l=n.lat,o=n.lon,i=a.app.dateTime,c=Je();return r.a.createElement(je.a,{color:"secondary","aria-label":"add",className:c.fab,onClick:function(e){t({type:"@planner/setDialogOpen",dialogOpen:!0}),t({type:"@planner/setPlan",plan:{category:"Plan",uuid:Re()(),type:"",description:"",dateTime:i,lat:l,lon:o}})}},r.a.createElement(Pe.a,null))},Ye=Object(h.a)((function(e){return{formControl:{minWidth:120}}}));var Qe=function(){var e=U(),a=e.dispatch,t=e.state.planner,n=t.plan,l=t.plans,o=t.dialogOpen,i=Ye(),c=function(){a({type:"@planner/setDialogOpen",dialogOpen:!1})},s=function(e){var t=Object.assign({},n);t[e.target.name]=e.target.value,a({type:"@planner/setPlan",plan:t})};return r.a.createElement(ke.a,{open:o,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement(Te.a,{id:"form-dialog-title"},"Add plan"),r.a.createElement(De.a,null,r.a.createElement(Ae.a,null,"Added plan will be immediately shared with the other teams."),r.a.createElement(_e.a,{className:i.formControl},r.a.createElement(xe.a,{htmlFor:"type"},"Plan type"),r.a.createElement(Ie.a,{inputProps:{name:"type"},value:n.type,onChange:s},r.a.createElement(H.a,{value:"Spraying the water"},"Spraying the water"),r.a.createElement(H.a,{value:"Prescribed burning"},"Prescribed burning"),r.a.createElement(H.a,{value:"Others"},"Others"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(pe.a,{label:"Description",name:"description",value:n.description,fullWidth:!0,onChange:s}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(pe.a,{name:"dateTime",label:"When",type:"datetime-local",value:n.dateTime,InputLabelProps:{shrink:!0},onChange:s})),r.a.createElement(We.a,null,r.a.createElement(Fe.a,{onClick:c,color:"primary"},"Cancel"),r.a.createElement(Fe.a,{onClick:function(e){var t=[].concat(l,n);a({type:"@planner/setPlans",plans:t}),a({type:"@planner/setDialogOpen",dialogOpen:!1})},color:"primary"},"Save")))},Xe="https://neo.sci.gsfc.nasa.gov/wms/wms?SERVICE=WMS&REQUEST=GetCapabilities&VERSION=1.3.0";function qe(e){return e.text().then((function(e){return(new DOMParser).parseFromString(e,"text/xml")}))}var $e=function(e,a){var t=new Ue.a.PlacemarkAttributes(null);t.imageScale=.05,t.imageColor=Ue.a.Color.RED,t.labelAttributes.offset=new Ue.a.Offset(Ue.a.OFFSET_FRACTION,.5,Ue.a.OFFSET_FRACTION,1),t.imageSource="".concat(Ue.a.configuration.baseUrl,"images/white-dot.png");var n={};return n.name=e.recordNumber,n.attributes=new Ue.a.PlacemarkAttributes(t),n.attributes.imageScale=.04+.001*e.values.FRP,n};var Ze=function(){var e=U(),a=e.dispatch,t=e.state,l=t.planner,o=l.lat,i=l.lon,c=l.range,s=l.plans,u=t.map,p=u.compass,m=u.cordinates,d=u.viewControls,g=u.layer,f=u.threeD,b=t.app.searchWord,h=function(e){a({type:"@planner/setLat",lat:e})},E=function(e){a({type:"@planner/setLon",lon:e})};Ue.a.configuration.baseUrl="".concat(""),Ue.a.BingMapsKey="Arpxb2gWJKw1Q7P7mt4_d1Lhg_sRPDCiH25jPkNGUanfiHyEi1Ijlk-4UVgkyu65";var v=new Ue.a.Globe(new Ue.a.EarthElevationModel),y=new Ue.a.Globe2D;return y.projection=new Ue.a.ProjectionMercator,Object(n.useEffect)((function(){var e=document.getElementById("canvas");e.width=window.innerWidth,e.height=window.innerHeight-64;var t=new Ue.a.WorldWindow("canvas");t.globe=f?v:y,t.navigator.lookAtLocation.latitude=o,t.navigator.lookAtLocation.longitude=i,t.navigator.range=c;for(var n=[{layer:new Ue.a.BMNGLayer,enabled:!0},{layer:new Ue.a.BMNGLandsatLayer,enabled:!1},{layer:new Ue.a.BingAerialLayer(null),enabled:!1},{layer:new Ue.a.BingAerialWithLabelsLayer(null),enabled:!0},{layer:new Ue.a.BingRoadsLayer(null),enabled:!1},{layer:new Ue.a.OpenStreetMapImageLayer(null),enabled:!1},{layer:new Ue.a.AtmosphereLayer,enabled:!0},{layer:new Ue.a.CompassLayer,enabled:p},{layer:new Ue.a.CoordinatesDisplayLayer(t),enabled:m},{layer:new Ue.a.ViewControlsLayer(t),enabled:d}],r=0;r<n.length;r++)n[r].layer.enabled=n[r].enabled,t.addLayer(n[r].layer);var l=new Ue.a.RenderableLayer("Fires");new Ue.a.Shapefile("".concat(Ue.a.configuration.baseUrl,"firms/VNP14IMGTDL_NRT_USA_contiguous_and_Hawaii_24h/VNP14IMGTDL_NRT_USA_contiguous_and_Hawaii_24h.shp")).load(null,$e,l),t.addLayer(l);var u=new Ue.a.RenderableLayer("Plans"),w=new Ue.a.PlacemarkAttributes(null);w.imageScale=.5,w.imageColor=Ue.a.Color.GREEN,w.labelAttributes.offset=new Ue.a.Offset(Ue.a.OFFSET_FRACTION,.5,Ue.a.OFFSET_FRACTION,1),s.forEach((function(e){var a=new Ue.a.Placemark(new Ue.a.Position(e.lat,e.lon,100),!0,null);a.label="".concat(e.type,"\n").concat(e.dateTime),a.altitudeMode=Ue.a.RELATIVE_TO_GROUND;var t=new Ue.a.PlacemarkAttributes(w);t.imageSource="".concat(Ue.a.configuration.baseUrl,"images/white-dot.png"),a.attributes=t;var n=new Ue.a.PlacemarkAttributes(t);n.imageScale=1.2,a.highlightAttributes=n,u.addRenderable(a)})),t.addLayer(u),"_"!==g.tag&&fetch(Xe).then(qe).then((function(e){var a=g.tag,n=new Ue.a.WmsCapabilities(e).getNamedLayer(a),r=Ue.a.WmsLayer.formLayerConfiguration(n);r.title=g.label;var l=new Ue.a.WmsLayer(r);l.opacity="0.5",t.addLayer(l)}));var O=new Ue.a.NominatimGeocoder,j=new Ue.a.GoToAnimator(t);if(b)if(b.match(Ue.a.WWUtil.latLonRegex)){var C=b.split(","),P=parseFloat(C[0]),L=parseFloat(C[1]);j.goTo(new Ue.a.Location(P,L),(function(){h(P),E(L)}))}else O.lookup(b,(function(e,a){if(0!==a.length){var t=parseFloat(a[0].lat),n=parseFloat(a[0].lon);j.goTo(new Ue.a.Location(t,n),(function(){h(t),E(n)}))}}));var R=function(e){var a=e.clientX,n=e.clientY,r=t.pick(t.canvasCoordinates(a,n));if(1===r.objects.length&&r.objects[0].isTerrain){var l=r.objects[0].position;j.goTo(new Ue.a.Location(l.latitude,l.longitude),(function(){h(l.latitude),E(l.longitude)}))}};t.addEventListener("wheel",(function(e){var n;n=t.navigator.range,a({type:"@planner/setRange",range:n})})),new Ue.a.ClickRecognizer(t,R),new Ue.a.TapRecognizer(t,R)}),[b,s,g,f,p,m,d]),r.a.createElement("canvas",{id:"canvas"})};var ea=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,null),r.a.createElement(Oe,null),r.a.createElement(Ze,null),r.a.createElement(Qe,null),r.a.createElement(Ke,null))},aa=t(193),ta=t.n(aa),na=t(377),ra=t(378),la=t(379),oa=t(380),ia=t(381),ca=t(382),sa=t(383),ua=t(384),pa=t(385),ma=t(386),da=t(387),ga=t(388),fa=t(389),ba=t(390),ha=t(391),Ea={Add:Object(n.forwardRef)((function(e,a){return r.a.createElement(na.a,Object.assign({},e,{ref:a}))})),Check:Object(n.forwardRef)((function(e,a){return r.a.createElement(ra.a,Object.assign({},e,{ref:a}))})),Clear:Object(n.forwardRef)((function(e,a){return r.a.createElement(la.a,Object.assign({},e,{ref:a}))})),Delete:Object(n.forwardRef)((function(e,a){return r.a.createElement(oa.a,Object.assign({},e,{ref:a}))})),DetailPanel:Object(n.forwardRef)((function(e,a){return r.a.createElement(ia.a,Object.assign({},e,{ref:a}))})),Edit:Object(n.forwardRef)((function(e,a){return r.a.createElement(ca.a,Object.assign({},e,{ref:a}))})),Export:Object(n.forwardRef)((function(e,a){return r.a.createElement(sa.a,Object.assign({},e,{ref:a}))})),Filter:Object(n.forwardRef)((function(e,a){return r.a.createElement(ua.a,Object.assign({},e,{ref:a}))})),FirstPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(pa.a,Object.assign({},e,{ref:a}))})),LastPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(ma.a,Object.assign({},e,{ref:a}))})),NextPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(ia.a,Object.assign({},e,{ref:a}))})),PreviousPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(da.a,Object.assign({},e,{ref:a}))})),ResetSearch:Object(n.forwardRef)((function(e,a){return r.a.createElement(la.a,Object.assign({},e,{ref:a}))})),Search:Object(n.forwardRef)((function(e,a){return r.a.createElement(ga.a,Object.assign({},e,{ref:a}))})),SortArrow:Object(n.forwardRef)((function(e,a){return r.a.createElement(fa.a,Object.assign({},e,{ref:a}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,a){return r.a.createElement(ba.a,Object.assign({},e,{ref:a}))})),ViewColumn:Object(n.forwardRef)((function(e,a){return r.a.createElement(ha.a,Object.assign({},e,{ref:a}))}))};var va=function(){var e=U(),a=e.dispatch,t=e.state,n=t.planner.plans,l=t.reporter.reports,o=[].concat(n,l);return r.a.createElement(ta.a,{title:"All posted data",icons:Ea,options:{title:!1,search:!1,exportButton:!0,editable:!0,minBodyHeight:"".concat(window.innerHeight-180,"px")},style:{borderRadius:0},columns:[{title:"Category",field:"category",editComponent:function(e){return r.a.createElement(Ie.a,{value:e.value||"",onChange:function(a){return e.onChange(a.target.value)}},r.a.createElement(H.a,{value:"Report"},"Report"),r.a.createElement(H.a,{value:"Plan"},"Plan"))}},{title:"Type",field:"type"},{title:"Description",field:"description"},{title:"Latitude",field:"lat",editComponent:function(e){return r.a.createElement(pe.a,{fullWidth:!0,placeholder:"Latitude",type:"number",value:e.value||"",onChange:function(a){return e.onChange(a.target.value)},InputLabelProps:{shrink:!0},inputProps:{min:-90,max:90}})}},{title:"Longitude",field:"lon",editComponent:function(e){return r.a.createElement(pe.a,{fullWidth:!0,placeholder:"Longitude",type:"number",value:e.value||"",onChange:function(a){return e.onChange(a.target.value)},InputLabelProps:{shrink:!0},inputProps:{min:-180,max:180}})}},{title:"Date time",field:"dateTime",editComponent:function(e){return r.a.createElement(pe.a,{type:"datetime-local",value:e.value||"",onChange:function(a){return e.onChange(a.target.value)},InputLabelProps:{shrink:!0}})}}],editable:{onRowAdd:function(e){if(e.uuid=Re()(),"Plan"===e.category){var t=[].concat(n,e);a({type:"@planner/setPlans",plans:t})}else{var r=[].concat(l,e);a({type:"@reporter/setReports",reports:r})}return new Promise((function(e,a){e()}))},onRowUpdate:function(e){if("Plan"===e.category){var t=[].concat(n).map((function(a){return a.uuid===e.uuid?e:a}));a({type:"@planner/setPlans",plans:t})}else{var r=[].concat(l).map((function(a){return a.uuid===e.uuid?e:a}));a({type:"@reporter/setReports",reports:r})}return new Promise((function(e,a){e()}))},onRowDelete:function(e){if("Plan"===e.category){var t=[].concat(n).filter((function(a){return a.uuid!==e.uuid}));a({type:"@planner/setPlans",plans:t})}else{var r=[].concat(l).filter((function(a){return a.uuid!==e.uuid}));a({type:"@reporter/setReports",reports:r})}return new Promise((function(e,a){e()}))}},data:o})};var ya=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,null),r.a.createElement(Oe,null),r.a.createElement(va,null))},wa=t(392),Oa=t(374),ja=t(394),Ca={citizen:"know how far wildfire is from my town and ask for help when it\u2019s needed.","senior-firefighter":"manage scattered wildfire information, related data and firefighting plans in a single place.","junior-firefighter":"learn the best practice of fire fighting planning from the past."},Pa={citizen:"/report","firefight-team-manager":"/plan",firefighter:"/dashboard"},La=Object(h.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},submit:{margin:e.spacing(3,0,0)},description:{fontSize:"16px",border:"1px solid rgba(0, 0, 0, 0.23)",padding:"12.5px 24px 12.5px 14px",borderRadius:"4px",minHeight:"56px"}}}));var Ra=function(){var e=La(),a=Object(n.useState)(""),t=Object(y.a)(a,2),l=t[0],o=t[1],i=Object(n.useState)(""),c=Object(y.a)(i,2),s=c[0],u=c[1];return s?r.a.createElement(m.a,{push:!0,to:Pa[l]}):r.a.createElement(r.a.Fragment,null,r.a.createElement(wa.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:e.paper},r.a.createElement(Oa.a,{container:!0,alignContent:"center",justify:"center",alignItems:"center"},r.a.createElement(Oa.a,{item:!0,xs:12},r.a.createElement(b.a,{component:"h1",variant:"h5"},"Try Firefighting planner"))),r.a.createElement("br",null),r.a.createElement(Oa.a,{container:!0,alignContent:"center",justify:"center",alignItems:"center"},r.a.createElement(Oa.a,{item:!0,xs:2},"as a"),r.a.createElement(Oa.a,{item:!0,xs:10},r.a.createElement(Ie.a,{value:l,onChange:function(e){o(e.target.value)},variant:"outlined",fullWidth:!0},r.a.createElement(H.a,{value:"citizen"},"Citizen"),r.a.createElement(H.a,{value:"firefight-team-manager"},"Firefight team manager"),r.a.createElement(H.a,{value:"firefighter"},"Firefighter")))),r.a.createElement("br",null),r.a.createElement(Oa.a,{container:!0,alignContent:"center",justify:"center",alignItems:"center"},r.a.createElement(Oa.a,{item:!0,xs:2},"to"),r.a.createElement(Oa.a,{item:!0,xs:10},r.a.createElement(b.a,{className:e.description},Ca[l]||""))),r.a.createElement(Fe.a,{disabled:!l,type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){u(!0)}},"Enter"))),r.a.createElement(ja.a,{mt:8},r.a.createElement(b.a,{variant:"body2",color:"textSecondary",align:"center"},"Created for ",r.a.createElement("a",{href:"https://2019.spaceappschallenge.org",target:"_blank",rel:"noopener noreferrer"},"NASA International Space Apps Challenge 2019")," and the world\ud83c\udf0f",r.a.createElement("br",null),"Made by ",r.a.createElement("a",{href:"https://2019.spaceappschallenge.org/challenges/living-our-world/spot-fire-v20/teams/firefighting-planner/project",target:"_blank",rel:"noopener noreferrer"},"Team Firefighting planner")," with love\ud83d\udc96")))};var Na=function(){return r.a.createElement(p.a,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/"},r.a.createElement(Ra,null)),r.a.createElement(m.b,{exact:!0,path:"/report"},r.a.createElement(ze,null)),r.a.createElement(m.b,{exact:!0,path:"/plan"},r.a.createElement(ea,null)),r.a.createElement(m.b,{exact:!0,path:"/dashboard"},r.a.createElement(ya,null))))},Sa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ka(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement((function(e){var a=e.children,t=Object(n.useReducer)(F,M),l=Object(y.a)(t,2),o=l[0],i=l[1];return Object(n.useEffect)((function(){localStorage.setItem("".concat(C.a,"@").concat(C.b),JSON.stringify(o))}),[o]),r.a.createElement(G.Provider,{value:{state:o,dispatch:i}},a)}),null,r.a.createElement(i.a,null),r.a.createElement(c.a,{theme:u},r.a.createElement(Na,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");Sa?(!function(e,a){fetch(e).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ka(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ka(a,e)}))}}()}},[[219,1,2]]]);
//# sourceMappingURL=main.b9636751.chunk.js.map