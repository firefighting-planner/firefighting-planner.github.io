(this["webpackJsonpfirefighting-planner"]=this["webpackJsonpfirefighting-planner"]||[]).push([[0],{39:function(e){e.exports=JSON.parse('{"a":"firefighting-planner","b":"0.1.0"}')},80:function(e,a,t){e.exports=t(93)},85:function(e,a,t){},93:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(9),l=t.n(o),i=(t(85),t(68)),c=t(26),s=t(10),u=t(122),p=t(124),d=t(71),m=t(73),g=t(120),b=t(17),f=t(65),h=t.n(f),y=t(70),v=t(64),w=t.n(v),O=function(e){return function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object.keys(e),r={},o=0;o<n.length;o++){var l=e[n[o]](a[n[o]],t);r[n[o]]=l}return r}},E=t(39);function j(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?j(t,!0).forEach((function(a){Object(s.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var L={time:"2018-08-01T10:10",searchWord:""};function k(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function A(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?k(t,!0).forEach((function(a){Object(s.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(t).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var T={range:6e5,lat:36.256535392993314,lon:-119.2002385680952,actions:[],dialogOpen:!1,action:{}},C=O({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"@app/setTime":return P({},e,{time:a.time});case"@app/setSearchWord":return P({},e,{searchWord:a.searchWord});default:return e}},planner:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"@planner/setAction":return A({},e,{action:a.action});case"@planner/setDialogOpen":return A({},e,{dialogOpen:a.dialogOpen});case"@planner/setRange":return A({},e,{range:a.range});case"@planner/setLat":return A({},e,{lat:a.lat});case"@planner/setLon":return A({},e,{lon:a.lon});case"@planner/setActions":return A({},e,{actions:a.actions});default:return e}}}),S={app:L,planner:T},R=JSON.parse(localStorage.getItem("".concat(E.a,"@").concat(E.b))),N=Object(n.createContext)(w()(S,R)),F=function(e){var a=Object(n.useContext)(N);return{state:a.state,dispatch:a.dispatch}},D=Object(g.a)((function(e){return{root:{flexGrow:1},title:Object(s.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(s.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(b.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(b.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(s.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));var W=function(){var e=F(),a=e.dispatch,t=e.state.app.searchWord,n=D();return r.a.createElement("div",{className:n.root},r.a.createElement(u.a,{position:"static"},r.a.createElement(p.a,null,r.a.createElement(d.a,{variant:"h6",className:n.title,noWrap:!0},"Firefighting planner"),r.a.createElement("div",{className:n.search},r.a.createElement("div",{className:n.searchIcon},r.a.createElement(h.a,null)),r.a.createElement(m.a,{placeholder:"Search\u2026",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"},onKeyPress:function(e){"Enter"===e.key&&a({type:"@app/setSearchWord",searchWord:e.target.value})},defaultValue:t})))))};var _=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null),r.a.createElement("div",null,"Reporter"))},I=t(125),x=t(67),G=t.n(x),U=Object(g.a)((function(e){return{fab:{position:"fixed",margin:e.spacing(1),bottom:0,right:0}}}));var B=function(){var e=F(),a=e.state,t=e.dispatch,n=a.planner,o=n.lat,l=n.lon,i=a.app.time,c=U();return r.a.createElement(I.a,{color:"secondary","aria-label":"add",className:c.fab,onClick:function(e){t({type:"@planner/setDialogOpen",dialogOpen:!0}),t({type:"@planner/setAction",action:{type:"",description:"",time:i,lat:o,lon:l}})}},r.a.createElement(G.a,null))},M=t(136),J=t(126),V=t(127),H=t(128),K=t(129),z=t(137),Q=t(134),X=t(139),Y=t(138),$=t(132),q=t(133),Z=Object(g.a)((function(e){return{formControl:{minWidth:120}}}));var ee=function(){var e=F(),a=e.dispatch,t=e.state.planner,n=t.action,o=t.actions,l=t.dialogOpen,i=Z(),c=function(){a({type:"@planner/setDialogOpen",dialogOpen:!1})},s=function(e){var t=Object.assign({},n);t[e.target.name]=e.target.value,a({type:"@planner/setAction",action:t})};return r.a.createElement(M.a,{open:l,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement(J.a,{id:"form-dialog-title"},"Add action"),r.a.createElement(V.a,null,r.a.createElement(H.a,null,"Added action will be immediately shared with the other teams."),r.a.createElement(K.a,{className:i.formControl},r.a.createElement(z.a,{htmlFor:"type"},"Action type"),r.a.createElement(Q.a,{inputProps:{name:"type"},value:n.type,onChange:s},r.a.createElement(X.a,{value:"Spraying the water"},"Spraying the water"),r.a.createElement(X.a,{value:"Prescribed burning"},"Prescribed burning"),r.a.createElement(X.a,{value:"Others"},"Others"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Y.a,{label:"Description",name:"description",value:n.description,fullWidth:!0,onChange:s}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Y.a,{name:"time",label:"When",type:"datetime-local",value:n.time,InputLabelProps:{shrink:!0},onChange:s})),r.a.createElement($.a,null,r.a.createElement(q.a,{onClick:c,color:"primary"},"Cancel"),r.a.createElement(q.a,{onClick:function(e){var t=[].concat(o,n);a({type:"@planner/setActions",actions:t}),a({type:"@planner/setDialogOpen",dialogOpen:!1})},color:"primary"},"Save")))},ae=t(6),te=t.n(ae),ne=function(e,a){var t=new te.a.PlacemarkAttributes(null);t.imageScale=.05,t.imageColor=te.a.Color.RED,t.labelAttributes.offset=new te.a.Offset(te.a.OFFSET_FRACTION,.5,te.a.OFFSET_FRACTION,1),t.imageSource="".concat(te.a.configuration.baseUrl,"images/white-dot.png");var n={};return n.name=e.recordNumber,n.attributes=new te.a.PlacemarkAttributes(t),n.attributes.imageScale=.04+.001*e.values.FRP,n};var re=function(){var e,a,t,o,l=F(),i=l.dispatch,c=l.state,s=c.planner,u=s.lat,p=s.lon,d=s.range,m=s.actions,g=c.app.searchWord,b=function(e){i({type:"@planner/setLat",lan:e})},f=function(e){i({type:"@planner/setLon",lon:e})};te.a.configuration.baseUrl="".concat(""),te.a.BingMapsKey="Arpxb2gWJKw1Q7P7mt4_d1Lhg_sRPDCiH25jPkNGUanfiHyEi1Ijlk-4UVgkyu65",new te.a.Globe(new te.a.EarthElevationModel);var h=new te.a.Globe2D;return h.projection=new te.a.ProjectionMercator,Object(n.useEffect)((function(){(t=t||document.getElementById("canvas")).width=window.innerWidth,t.height=window.innerHeight-64,(o=o||new te.a.WorldWindow("canvas")).globe=h,o.navigator.lookAtLocation.latitude=u,o.navigator.lookAtLocation.longitude=p,o.navigator.range=d;for(var n=[{layer:new te.a.BMNGLayer,enabled:!0},{layer:new te.a.BMNGLandsatLayer,enabled:!1},{layer:new te.a.BingAerialLayer(null),enabled:!1},{layer:new te.a.BingAerialWithLabelsLayer(null),enabled:!0},{layer:new te.a.BingRoadsLayer(null),enabled:!1},{layer:new te.a.OpenStreetMapImageLayer(null),enabled:!1},{layer:new te.a.AtmosphereLayer,enabled:!0},{layer:new te.a.CompassLayer,enabled:!0},{layer:new te.a.CoordinatesDisplayLayer(o),enabled:!0},{layer:new te.a.ViewControlsLayer(o),enabled:!0}],r=0;r<n.length;r++)n[r].layer.enabled=n[r].enabled,o.addLayer(n[r].layer);var l=new te.a.RenderableLayer("Fires");new te.a.Shapefile("".concat(te.a.configuration.baseUrl,"firms/VNP14IMGTDL_NRT_USA_contiguous_and_Hawaii_24h/VNP14IMGTDL_NRT_USA_contiguous_and_Hawaii_24h.shp")).load(null,ne,l),o.addLayer(l);var c=new te.a.RenderableLayer("Actions"),s=new te.a.PlacemarkAttributes(null);s.imageScale=.5,s.imageColor=te.a.Color.GREEN,s.labelAttributes.offset=new te.a.Offset(te.a.OFFSET_FRACTION,.5,te.a.OFFSET_FRACTION,1),m.forEach((function(e){var a=new te.a.Placemark(new te.a.Position(e.lat,e.lon,100),!0,null);a.label="".concat(e.type,"\n").concat(e.time),a.altitudeMode=te.a.RELATIVE_TO_GROUND;var t=new te.a.PlacemarkAttributes(s);t.imageSource="".concat(te.a.configuration.baseUrl,"images/white-dot.png"),a.attributes=t;var n=new te.a.PlacemarkAttributes(t);n.imageScale=1.2,a.highlightAttributes=n,c.addRenderable(a)})),o.addLayer(c);var y=new te.a.NominatimGeocoder,v=new te.a.GoToAnimator(o);if(g)if(g.match(te.a.WWUtil.latLonRegex)){var w=g.split(","),O=parseFloat(w[0]),E=parseFloat(w[1]);v.goTo(new te.a.Location(O,E),(function(){clearTimeout(a),a=setTimeout((function(){b(O),f(E)}),100)}))}else y.lookup(g,(function(e,t){if(0!==t.length){var n=parseFloat(t[0].lat),r=parseFloat(t[0].lon);v.goTo(new te.a.Location(n,r),(function(){clearTimeout(a),a=setTimeout((function(){b(n),f(r)}),100)}))}}));var j=function(e){var t=e.clientX,n=e.clientY,r=o.pick(o.canvasCoordinates(t,n));if(1===r.objects.length&&r.objects[0].isTerrain){var l=r.objects[0].position;v.goTo(new te.a.Location(l.latitude,l.longitude),(function(){clearTimeout(a),a=setTimeout((function(){b(l.latitude),f(l.longitude)}),100)}))}};o.addEventListener("wheel",(function(a){clearTimeout(e),e=setTimeout((function(){var e;e=o.navigator.range,i({type:"@planner/setRange",range:e})}),1e3)})),new te.a.ClickRecognizer(o,j),new te.a.TapRecognizer(o,j)}),[h,u,p,g,m,d]),r.a.createElement("canvas",{id:"canvas"})};var oe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null),r.a.createElement(re,null),r.a.createElement(ee,null),r.a.createElement(B,null))};var le=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null),r.a.createElement("div",null,"Dashboard"))};var ie=function(){return r.a.createElement(i.a,null,r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/report"},r.a.createElement(_,null)),r.a.createElement(c.a,{exact:!0,path:"/"},r.a.createElement(oe,null)),r.a.createElement(c.a,{exact:!0,path:"/dashboard"},r.a.createElement(le,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement((function(e){var a=e.children,t=Object(n.useReducer)(C,S),o=Object(y.a)(t,2),l=o[0],i=o[1];return Object(n.useEffect)((function(){localStorage.setItem("".concat(E.a,"@").concat(E.b),JSON.stringify(l))}),[l]),r.a.createElement(N.Provider,{value:{state:l,dispatch:i}},a)}),null,r.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[80,1,2]]]);
//# sourceMappingURL=main.a89904c1.chunk.js.map